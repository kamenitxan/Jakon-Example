{"version":3,"sources":["jakon-core/src/frontend/admin/js/forms/j_foreign_object.js","jakon-core/src/frontend/admin/js/forms/j_textarea.js","jakon-core/src/frontend/admin/js/test.js","jakon-core/src/frontend/admin/js/utils/Ajax.js"],"names":["ForeignObjectSelector","objectName","objectHash","endPoint","selectbox","document","getElementById","searchbox","addEventListener","e","hideSearch","handleSearch","classList","remove","focus","activeElement","Ajax","require","post","query","value","then","console","log","data","fillSelect","catch","error","itemCount","options","length","i","result","forEach","opt","createElement","id","text","name","add","module","exports","JTextarea","fieldHash","megamark","domador","woofmark","querySelector","parseMarkdown","defaultMode","parseHTML","url","fetch","body","JSON","stringify","headers","method","mode","redirect","referrer","response","ok","json","Error"],"mappings":"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","file":"static/jakon/js/jakon.js","sourcesContent":["class ForeignObjectSelector {\n\n    constructor(objectName, objectHash) {\n        this.objectName = objectName;\n        this.objectHash = objectHash;\n        this.endPoint = \"/admin/api/search\";\n        this.selectbox = document.getElementById(this.objectHash);\n        this.searchbox = document.getElementById(\"js_foreign_\" + this.objectHash);\n\n        /* this.selectbox.addEventListener(\"click\", (e) => {\n             this.showSearch(e);\n         }); */\n        this.selectbox.addEventListener(\"blur\", (e) => {\n            this.hideSearch(e);\n        });\n        this.searchbox.addEventListener(\"keyup\", (e) => {\n            this.handleSearch(e);\n        });\n        this.searchbox.addEventListener(\"blur\", (e) => {\n            this.handleSearch(e);\n        });\n        this.handleSearch();\n    }\n\n    showSearch() {\n        this.searchbox.classList.remove(\"hidden\");\n        this.searchbox.focus();\n    }\n\n    hideSearch() {\n        if (document.activeElement !== this.searchbox) {\n            //this.searchbox.classList.add(\"hidden\");\n        }\n    }\n\n    handleSearch() {\n        const Ajax = require(\"utils/Ajax.js\");\n        Ajax.post(this.endPoint,\n            {\n                objectName: this.objectName,\n                query: this.searchbox.value\n            })\n            .then(data => {\n                console.log(data);\n                this.fillSelect(data);\n            })\n            .catch(error => console.error(error))\n    }\n\n    fillSelect(data) {\n        const itemCount = this.selectbox.options.length;\n        for (let i = 0; i <= itemCount; i++) {\n            this.selectbox.remove(i);\n        }\n        data.result.forEach(e => {\n            let opt = document.createElement(\"option\");\n            opt.value = e.id;\n            opt.text = `Id: ${e.id} - ${e.name}`;\n            this.selectbox.add(opt);\n        })\n    }\n\n}\n\nmodule.exports = ForeignObjectSelector;","class JTextarea {\n    init(fieldHash) {\n        const megamark = require('megamark');\n        const domador = require('domador');\n        const woofmark = require('woofmark');\n        woofmark(document.querySelector(\"#editor-container\" + fieldHash),\n            {\n                parseMarkdown: megamark,\n                defaultMode: 'wysiwyg',\n                parseHTML: domador\n            });\n    }\n};\n\n\nmodule.exports = JTextarea;","document.addEventListener('DOMContentLoaded', () => {\n    // do your setup here\n    console.log('kadasdaskdaks app');\n})\n;\n\nvar megamark = require('megamark');\nvar woofmark = require('woofmark');\nvar domador = require('domador');","class Ajax {\n\n    static post(url, data) {\n        return fetch(url, {\n            body: JSON.stringify(data),\n            headers: {\n                'content-type': 'application/json'\n            },\n            method: 'POST', // *GET, POST, PUT, DELETE, etc.\n            mode: 'cors', // no-cors, cors, *same-origin\n            redirect: 'follow', // manual, *follow, error\n            referrer: 'no-referrer', // *client, no-referrer\n        }).then(response => {\n            if (response.ok) {\n                return response.json()\n            } else {\n                throw new Error('Network response was not ok.');\n            }\n        })\n    }\n\n    static get(url, data) {\n\n    }\n}\n\nmodule.exports = Ajax;"]}